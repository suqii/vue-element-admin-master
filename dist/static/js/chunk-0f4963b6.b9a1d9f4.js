(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f4963b6"],{"111c":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"hello"},[s("uploadimg",{attrs:{list:e.list,uploadpic:e.uploadpic,limit:e.limit},on:{"update:list":function(t){e.list=t}}})],1)},n=[],a=(s("e35a"),s("5e9f"),s("053b"),s("08ba"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",[s("el-col",{attrs:{span:24}},[s("div",{staticClass:"grid-content header"},[e._v("阿里OSS文件上传")])])],1),s("el-row",{attrs:{gutter:15}},[s("el-col",{staticClass:"divided",attrs:{span:11}},[s("div",{staticClass:"grid-content left-con"},[s("el-form",{ref:"form"},[s("el-form-item",{attrs:{label:"阿里云bucket"}},[s("el-input",{model:{value:e.keySet.bucket,callback:function(t){e.$set(e.keySet,"bucket",t)},expression:"keySet.bucket"}})],1),s("el-form-item",{attrs:{label:"阿里云key"}},[s("el-input",{model:{value:e.keySet.accessKeyId,callback:function(t){e.$set(e.keySet,"accessKeyId",t)},expression:"keySet.accessKeyId"}})],1),s("el-form-item",{attrs:{label:"阿里云secret"}},[s("el-input",{attrs:{type:"password"},model:{value:e.keySet.accessKeySecret,callback:function(t){e.$set(e.keySet,"accessKeySecret",t)},expression:"keySet.accessKeySecret"}})],1),s("el-form-item",{attrs:{label:"所在区域"}},[s("el-select",{attrs:{placeholder:"请选择所在区域"},model:{value:e.keySet.region,callback:function(t){e.$set(e.keySet,"region",t)},expression:"keySet.region"}},[s("el-option",{attrs:{label:"上海数据中心",value:"oss-cn-shanghai"}}),s("el-option",{attrs:{label:"杭州数据中心",value:"oss-cn-hangzhou"}}),s("el-option",{attrs:{label:"青岛数据中心",value:"oss-cn-qingdao"}}),s("el-option",{attrs:{label:"北京数据中心",value:"oss-cn-beijing"}}),s("el-option",{attrs:{label:"香港数据中心",value:"oss-cn-hongkong"}}),s("el-option",{attrs:{label:"深圳数据中心",value:"oss-cn-shenzhen"}})],1)],1),s("el-form-item",{attrs:{label:"当前文件路径"}},[s("el-cascader",{attrs:{options:e.options,props:{expandTrigger:"hover"}},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),s("el-form-item",{attrs:{label:"图片url"}},[s("el-input",{model:{value:e.selectImgUrl,callback:function(t){e.selectImgUrl=t},expression:"selectImgUrl"}})],1),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.concetOss}},[e._v("连接")])],1)],1)]),s("el-col",{attrs:{span:1}},[s("el-divider",{attrs:{direction:"vertical"}})],1),s("el-col",{attrs:{span:12}},[e.nothingFlag?s("el-empty",{attrs:{"image-size":500,image:"https://z3.ax1x.com/2021/10/13/5KypXF.png",description:"还未连接，暂无数据"}}):s("div",{staticClass:"grid-content right-con"},[s("el-form",[s("el-form-item",{attrs:{label:""}},[s("el-upload",{attrs:{action:"''","list-type":"picture-card","http-request":e.uploadpic,"before-upload":e.beforeAvatarUpload,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.handleRemove,"file-list":e.showlist}},[s("i",{staticClass:"el-icon-plus"})]),e.showViewer?s("el-image-viewer",{attrs:{"on-switch":e.picSwitch,"on-close":e.closeViewer,"url-list":e.picList}}):e._e()],1)],1)],1)],1)],1)],1)}),l=[],r=s("e9ff"),o=(s("e186"),s("e18c"),s("1c2e"),s("ea69"),s("f770")),c=s("3a9c"),u="LTAI6tB6S6bak4Q326o4EgcR",p="o0CvstEPN761hOSugTl6NhAfjnKdvH",h=new c({region:"oss-cn-beijing",accessKeyId:u.replace(/6/g,"5"),accessKeySecret:p.replace(/6/g,"a"),bucket:"suqiqi"}),d={name:"Uploadimg",components:{ElImageViewer:o["a"]},props:["list","uploadpic","limit"],data:function(){return{value:["freeFind"],options2:[],nothingFlag:!0,optionItem:{value:"test",label:"测试",children:[]},options:[{value:"freeFind",label:"freeFind"},{value:"test",label:"测试",children:[{value:"testChild",label:"测试上传区",children:[{value:"testChild1",label:"上传子区1"},{value:"testChild2",label:"上传子区2"},{value:null,label:"当前目录"}]},{value:"headImg",label:"头像"}]},{value:"data",label:"data",children:[{value:"freeFind",label:"freeFind"}]},{value:"MK",label:"Markdown图片"}],testValue:null,keySet:{region:"oss-cn-beijing",accessKeyId:u.replace(/6/g,"5"),accessKeySecret:p.replace(/6/g,"a"),bucket:"suqiqi"},showViewer:!1,selectImgUrl:"",showlist:[],imgList:[],picList:[]}},watch:{list:function(e){for(var t in e)this.picList.push(e[t].url)},keySet:{handler:function(e){},deep:!0}},created:function(){},mounted:function(){},methods:{concetOss:function(){console.log("连接测试"),h=new c(this.keySet),this.fileList("freeFind")},handleChange:function(e){console.log(e);var t=this;t.path="",e.forEach((function(e){t.path+=e+"/"})),console.log(t.path),this.fileList(e)},fileList:function(e,t){var s=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.list();case 3:return i=t.sent,t.next=6,h.list({prefix:e,marker:""});case 6:i=t.sent,s.imgList=i.objects,s.nothingFlag=!1,s.getimgdata(),t.next=24;break;case 12:t.prev=12,t.t0=t["catch"](0),n=null,t.t1=t.t0.toString(),t.next="InvalidAccessKeyIdError: The OSS Access Key Id you provided does not exist in our records."===t.t1?18:"SignatureDoesNotMatchError: The request signature we calculated does not match the signature you provided. Check your key and signing method."===t.t1?20:22;break;case 18:return n="您提供的OSS访问密钥Id在记录中不存在。",t.abrupt("break",23);case 20:return n="您提供的OSS访问密钥与Key不匹配。",t.abrupt("break",23);case 22:return t.abrupt("break",23);case 23:s.$message({message:"连接失败！失败原因："+n,type:"warning"});case 24:case"end":return t.stop()}}),t,null,[[0,12]])})))()},filePathList:function(e,t){return Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],s={value:"test",label:"测试",children:[]},e.prev=2,e.next=5,h.list({prefix:"",delimiter:"/"});case 5:i=e.sent,n=i.prefixes,n.forEach((function(e){s.value=e,s.label=e,t.push(s)})),console.log(t),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))()},getPathLists:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.list({prefix:e,delimiter:"/"});case 3:return s=t.sent,console.log(s.prefixes),t.abrupt("return",s.prefixes);case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},test:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var i,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=t,n={value:"test",label:"测试",children:[]},s.next=4,new Promise((function(t,s){var a=h.list({prefix:e,delimiter:"/"});a.then((function(e){console.log(e.prefixes),e.prefixes?(console.log("还有子文件"),e.prefixes.forEach((function(e){n.value=e,n.label=e,i.options2.push(n),i.test(e)}))):console.log("无子文件"),console.log("结果输出为下："),console.log(i.options2)}),(function(){})),t(a)}));case 4:return s.abrupt("return",s.sent);case 5:case"end":return s.stop()}}),s)})))()},getimgdata:function(){for(var e in this.showlist=this.imgList,this.showlist)this.picList.push(this.showlist[e].url);this.$message({message:"文件获取成功",type:"success",duration:700})},handlePictureCardPreview:function(e){this.showViewer=!0;var t=0;for(t=0;t<this.showlist.length;t++)if(this.picList[t]==e.url)break;for(var s=0;s<t;s++)this.picList.push(this.picList[s]);this.picList.splice(0,t)},handleRemove:function(e,t){console.log(e.name)},closeViewer:function(){this.showViewer=!1},picSwitch:function(e){this.selectImgUrl=this.picList[e]},beforeAvatarUpload:function(e){var t=e.size/1024/1024<this.limit;return t||this.$message.error("上传头像图片大小不能超过"+this.limit+"MB!"),t}}},f=d,g=(s("173e"),s("cba8")),m=Object(g["a"])(f,a,l,!1,null,"2a7a257c",null),v=m.exports,b=s("3a9c"),k="LTAI6tB6S6bak4Q326o4EgcR",w="o0CvstEPN761hOSugTl6NhAfjnKdvH",y=new b({region:"oss-cn-beijing",accessKeyId:k.replace(/6/g,"5"),accessKeySecret:w.replace(/6/g,"a"),bucket:"suqiqi"}),S={name:"Alioss",components:{uploadimg:v},data:function(){return{list:[],testList:[],uploadPath:"freeFind/",imgList:[],limit:2,path:""}},mounted:function(){},methods:{uploadpic:function(e){var t=this;y.put(this.uploadPath+e.file.name,e.file).then((function(e){t.list.push({url:e.url})})).catch((function(e){console.log(e)}))},listBuckets:function(){var e=y.listBuckets();console.log(e)},handleChange:function(e){console.log(e);var t=this;t.path="",e.forEach((function(e){t.path+=e+"/"})),this.uploadPath=t.path,console.log(t.path)}}},x=S,L=(s("7138"),Object(g["a"])(x,i,n,!1,null,"0375b070",null));t["default"]=L.exports},"173e":function(e,t,s){"use strict";s("ee82")},7138:function(e,t,s){"use strict";s("98d5")},"98d5":function(e,t,s){},ee82:function(e,t,s){}}]);